TO DO UP NEXT:

// When you are done testing NPCs at staging area put this stuff back to normal
// for the prison convo trigger, move pow and pilot back. make pow tied up. moved prop heli in staging are back



Current TASK: 
- Recheck how the Captain debrief is working. Some stuff might have broken. Ditch the performance ratings.
    - i added a failure state for proceed to infil spot
    - I decided to not have performance ratings for players but I like the flavor text
    - I reworked the extract task which can now be failed so I might need to add that as a primary objective.
Design: I have to make a decision on if I make the debrief based on the players task list or events within the mission. 
    - Task List: It's fun that the convo lines up with what tasks are completed or not, but kind of results in speech that is immersion 
        breaking (i.e. "We did all primary objectives but not all secondary objectives). 
    - Mission Events: I like this one better cause the convos can be more specific to the narritive events of the mission like "We got the general".
        IRL the boss wouldn't care that every little objective like "get in the stab" was accomplished. This version is less gamey and more immersive.
        - I think it would actually be better to have the debrief centered around the point of the whole operation; kill the general. It 
            gives continuity with the briefing and it's focus on him, while minimizing scripting complexity. In the future I can always 
            try the FSM builder in the tools to make a robust version. 
            - There just needs to be three cases: I.d. retrieved, general dead no idea, general fled.
                - I need to fabricate a reason that it's important to get the I.D. and not just kill him.
            - I was able to adapt Lou's script to my needs. It works pretty well actually. I have it centered around main mission objectives. 
                The only thing that sucks is I have to put in sleeps manually tied to the audio files and since sleeps aren't guarenteed length there can be 
                some odd pauses in the convo. Maybe ask Nikko about that.
            - Current task is to go through and refine the text for all cases to make it flow together. I just started the work on best and worst cases.
                - you can modify the function to have a delay before (default 0) much like the delay after. That would cause a pause.
                - look into this: !(_originalTarget getVariable ['foxclub_var_isTalking',false])
            - Let's add a convo that specifies which side tasks were hit 
            - After it's all done testing then you need to implement it by adding the variables into the various triggers.

also try to broadcast the istalking variable
   
    
DEDICATED SERVER TESTING:
- worked on some triggers that let the player know if they are boating in the wrong direction.
- mercinko should have no questions left. but the way its scripted looks like they still will be there.
- fixed issue where the POW was saying SOG voice lines because I changed his object type and forgot to update it in the restrict voices module
- test infil convo for working on dedicated server.
- Test if players still have holdAction after respawn. there is some question as to if they persist.
- Test if skip to infil needs to be remoteexeced. weather and time might not change. you can copy some code from radiohq.sqf
- the sam site targets player which could lead to the pilot not getting shot down. needs more testing to see how often that would happen.
- Any code with _responder might have unit talking to itself. take a look during playtesting.
- If during testing notifications are overlaping each other at the infil spot then consider disabling the notifications for the several tasks 
    and try to use this to create a single notification of "many tasks created" https://community.bistudio.com/wiki/BIS_fnc_showNotification      
- There is some question to how leadership is changed when a leader disconnects. To test it properly we need to setup the laptop and have two
    clients. See if you are able to get the scout to be the group leader with 2 clients connected. He is supposed to be 2nd because of editor
    order but I never could get it to work with local host + client testing. I have added an EH that should reassign leader to a human if
    the AI is ever given leader.


BUGS FROM LATEST PLAYTHROUGH:


TO DO MASTER LIST:
    HIGH PRIORITY:
        
    MEDIUM PRIORITY:
    
    LOW PRIORITY:
        - see if an grenade explode EH is worth putting for the cache task.
        - Update all needed pictures in the mission from tasks to victory/death screens. This should be near the last thing you do
            because the mission is ever evolving and what you use now might not be usable later, which results in wasted time.
        - Entire SFX pass for whole project for addactions and hold actions and whatever else you can think of (do this before voices so you can 
            learn the program and workflow)
        - Adjustments to arsenal, inventories, and unit classes to match decription (RTO, medic, etc). I think that the variable name might 
            also show up in the U menu when switching units in singleplayer.
        - remove all mod dependencies.
        - Record voice actors (literally the last thing you do), gives plenty of time to refine dialog.
        
    
    POLISH:
        - changed the pow/pilot task complete condition to if they enter the ambulance. Hide the ambulance unless the task to save either 
            of them creates.
        - skip to infil not fading to black, intermittant
        - adjust the time of day for skip to infil to have closer parity with TOD of not using the skip.
        - try the lookAt and reveal command on the SAM site and see if you get more consistant results of it not tracking players and 
            instead tracking the plane.
        - see if possible to attach prop object to boat as a bomb then unhide when planted. do the same for scubba clothes and props 
        - When pilot asks for smoke color confirmation, that line and the pow/pilot all play at once. Too hard to tell who is saying what.
        - Add a convo that tells the pow/pilot that the ambulance is waiting for them.
        - See if it's possible to add climbing animation to the POW as he exits the tunnel.
        - Add all NPCs is staging area to the exclusion list for blufor speech chatter/banter. This is at the very end of polish so that 
            you don't have to keep updating it since the amount of NPCs could change. Possible to just remove the feature entirley?
        - trg_convo_cove; If the scout is the leader then he will end up speaking to himself.
    
    PERFORMANCE:
        - In the staging area the client gets about 13fps more (80 vs 67). Something runs on the server only. For sure the server only 
            triggers. I wonder if there is anything else?
        - use this command to enabledynamic sim on object through a trigger: https://community.bistudio.com/wiki/enableDynamicSimulation 
            mainly thinking of the reinforcement trucks.
        - remove unused actions for performance. Eh, triggers, etc
        - There may be some incompatibility between the hide module and dynamic simulation. If both are enabled I can see in zeus that all 
            NPCs are frozen suggesting sim is disabled. But if players move to the infil spot and then come back then the NPCs will walk 
            around, only they will be invisible. I can see them walking in zeus. Also the player can see their footprints and hear their 
            foot steps. When I turned the dynamic simulation off, they did not have this behavior and performace seemed better in the staging 
            area before players leave (not verified). Do testing of performace benefeits and employ as needed.
            - I did one test with the NPCs with DS on/off. No noticable difference. Maybe 1-2fps difference, which could be due to testing 
                methodology or other reasons.


    IDEA GRAVEYARD:
        - Design: Add achievements. I think this is a neat idea but it will add a bunch of
            scope to a project already struggling to find completion. Reevaluate later if you wish.
            - Now that I know more this wouldn't be that hard to implement. The whole thing is drive by global variables that already exist. 
                Just have to tie those to some achievement tasks that players can elect from the map board. Default is off since the 
                achievements contain spoilers. Have cheevo names be non-descript and tongue in cheek vietnam/seal references.
                - Some cheevo ideas: 
                    - Complete every task 
                    - retrieve the general I.D. and extract without alerting patrols
                    - find and rescue the downed pilot
                    - find and rescue the pow
                    - disable the enemy radio tower
                    - have scout equip enemy radio backpack
                    - complete every cheevo
        - Design: Try to incourage the hand signal module by punishing players using their radios. 
            Send trackers after them if they use it too much. I like this idea but it will add too much scope to the mission.
            Perhaps in the future for another mission or if I ever finish this one with time to spare.
            - This simulates the ability of the enemy to use radio direction finding.
        - Design: Mission fails if friendly fire threshold is reached. I don't think I need to do this.
            - If anyone plays this mission almost certainly they know each other. Let social acceptance guide player behavior here.
            - Players punished by accidental friendly fire can feel can feel like it's unfair or unfun rule.
        - Design: Disable the squad radio chatter. It is vanilla ARMA sounds so it breaks immersion for me. But if I do this then it could
            hamper important game feedback for single players would want AI. Unfortunantley I think we need to keep it unless playtesting
            proves otherwise.
            - You could have an option from the map board to turn this off (enableRadio, enableSentences, disableAI "radioprotocol").
        - Design: If you put on an enemy back pack you get to know if you are being tracked and whatever other info/things could be
            a boon to players. I think this is a neat idea that could play into having an indiginous unit in the group but as it sits 
            right now I don't see the value it can add mechanic wise.
            - I've thought of some interesting ideas. Also this could be an interesting risk reward mechanic. The risk is the patrol alerting 
                the general but if they get the backpack without alerting him then they gain an advantage on intel.
                - Lets players know if they are currently tracked.
                - let's players know whenever things happen in the mission behind the scenes:
                    - stab was found
                    - reinforcement sent to lumphat
                    - reinforcement sent to road
                    - helicopter inbound
                - have scout impersonate the enemy to gain advantage
                    - send the patrol in lumphat away from town
    ABANDONED STUFF:
        - On the client, helicopter flys glitchy. There is no fix for this since the group can only be local to one machine. More detailed 
            in the log
        - Design: I think I have to add holdActions to the SAM site stuff for parity. How else do you explain to players why you can use holdAction on the cache
            but not the SAM? I decided not to pursue this because it will add too much time to change the code and have to do more rewriting 
            of it for little payoff of polish. This is a great learning experience on why it is better to make designs in the early part of 
            the mission. The idea here is to have that aspect solidified so that you don't loose time reworking systems or rewriting code.
        - Function Rework: Might be possible to pass an new index to the function. Pass the name of the animation to be displayed. 
            Then in the function itself you can have the playmove and then animation name and also a cancel animation. 
            Maybe mirror how say3d works in the function. Should be the same.
                - Through much testing it is clear that there is no one size fits all approach to animations. Some animations seemingly 
                    only work with certain commands and the same reguarding the EH for them. It's a mess and not worth pursuing.


TOUGH BUGS:
Bug: It seem's as if you cannout spawn on another player if they have previously died. You can select them but you get red warning 
    that you can't spawn on a dead player.
        - This is inconsistant. Now it's letting me spawn on players again.
            - And now it's not again. Perhaps there is a timer when you repawn that prevents someone spawning on you?
- try addvehicle command to no kick players out of vehicle (not verified since waypoints rework of helicopter extraction)
- scout wont get in the stab
- couldnt access arsenal at cache one time.
- Some sub tasks are out of there main categories. Resolves on mission restart.
- couldn't get in boat until other players exited
- players dont always end up in boat with skip to ingress

    JIP ISSUES:
        - if a player leaves and he had an ai in his group then no one else can control the AI. The AI becomes invincible. maybe the enable damage reverts? I think
        so because this doesnt happen with the POW
        - player may not have access to their loadout from the stab if they have scuba equipped and leave and rejoin.
        - some combination of JIP players coming and going cause some tasks to cycle through when a player joins. Does not seem to affect the sync of the tasks 
        though.
        - If a player leaves and his AI is killed its loadout reverts. Face still working tho.


BEFORE YOU PUBLISH:
read description.ext on wiki to polish load screens, etc
- add mission steam main pic (can be any size but must be square. set 1440x1440 in gimp. use square overlay in splendid camera.)
- two more screen shots. approching village and sinlge file jumngle walk space 10 meters apart.
- add autosaves for SP


TO EXPORT FOR PLAY TESTING ON DEDICATED SERVER:
- Change time to night (00:10)
- adjust respawn settings (on custom position and choose the spawn 60secs1)
- enable intro in init.sqf
- make sure player groups call sign is Rankin and all at the start area
- enable damage for command and scout unit
- move pics files back


FINISHED:
Design: players are allowed to drive away without their human squad mates but the next task wont popup until they are all in. I am going to 
    leave this as is and see how play testing goes. If there are problems with players leaving their mates behind then I will disable 
    the STAB until all players are on board:
    - I tried setting fuel to 0 but the unit calls it out which breaks immersion. I tried enableRadio false, but it turns off my customChat 
        I tried disablesimulation but then you can't enter.
        - using disableAI works but it's a local arg, might need to remoteExec it to get it to work. only the enable portion not working.
            - players wont get feed back from ai boarding the STAB tho, which is a downside.
Polish: make a variable from the map stand allow skiping to the infil and add a diary entry about it.
Polish: Test flight one more time to verify working as good as possible. (looks good)
Polish: helicopter didn't fly correctly. bobbed up and down and didn't fly high like in SP. (tldr: not fixable)
    - confirmed. it seems to me that its flys different in SP than MP.
        - removed the flyInHeight to see what happens
            - nothing happened. I think the flyInHeight isnt doing anything in MP despite being remoteexeced.
            - The helicopter flys smooth on the server/local host but not on the client
    - to steamline the testing process, setup a test helicopter with the same code as the current one.
    - findings:
        - doesn't seem to matter if you remoteExec the code in the function or not. Client heli is always bouncy.
            - suggests a network issue? but i dont remember sogpf like this.
            - try a different heli
                - tried a old style heli, didn't change
            - try less people in the heli
                - just the crew plus local host and client, didn't change
            - try adjusting the waypoint to have a height value.
                - added one 500 ft above the groud. the heli had no change on the way there and would only climb once near the end point
            - try adding flyInHeight back 
                - was a little smoother but still jerky and didn't actually try to fly in the defined height until almost at the prison.
            - try it without any players. Have the client be in the zeus slot to follow it.
            - try a different area of the map. flat terrain and hilly.
                - tried it on the runway. same issue. very choppy from inside the chopper view too.
            - try with editor waypoints 
                - same issue on client
            - try the sogpf main campaign
                - has the exact same issue for the client! tested on LAN. I'm not confident that it's a helicopter issue anymore. I noticed 
                    that when the helicopter hitches, the game itself hitches. Maybe this is a network issue with arma? Also tried playing as 
                    pilot in sogpf. The client stuttered on take off but was smooth for a short flight. Need to test more.
            - try vanilla ARMA
                - same issue!
            - try dedicated server
                - same issue! I noticed this time that it seems worse at the beginning of the ride when the heli is close to the ground 
                        though it did still do the hitching from above the water at medium height.
            - try it while in zeus mode.
                - interesting findings. The hitching of the game is there. but the chopper is smoother. small zorps but not bounces. 
                    following heli from zeus. Now if I do puppet control with zeus it is perfectly still. maybe because zeus is virtual entity?
            - see if heli height effects it. spawn in the air with a move way point.
                - same issue!
            - try different waypoint commands
                tied loiter command. same issue!
            - try singleplayer
                - no issue. I have never been able to get the issue to happen on the server (singleplayer or localhost). More and more evidence 
                    is pointing to this being a network issue with arma. Perhaps related to how often a players position needs to be updated?
            - try from client as zeus but not entity zeus
                - same as entity zeus. its smooth. maybe because the player is controlling it? 
            - try localhost and client as pilot and copilot. 
                - perfectly smooth for the client, even if the local host is the pilot. same for vice versa
            - try to change locality of helicopter.
                - BINGO! If you change the locality from the server to a player it is smooth again. The original code for the heli works as 
                    well. The pilots wont get out anymore and walk their waypoints. Likely because ownership change. Might have to execute that 
                    code a little differently. 
                    - Next step is to see if it is smooth for all clients and not just the owner.
                        - was NOT smooth on the local host after the switch.
                        - was Not smooth on any client except the groupOwner - fuck!
                        - there cannot be more than one owner of the group. Looks like this issue cannot be solved. I posted a video on 
                            discord to see if people smarter than me can solve it.
Design: Convos: If people think there is too much talking then have an option to reduce it for SP vs MP. Or on/off for either.
            - maybe in the function add a variable that will exit with that turns it off. though that would block everything.
                - I can achieve this by spilting the functions. Have one for priority convo and one for not. Do a exitWith check for a variable
                    for the non priority function. Players can send the variable from the map stand at mission start.
                - Another option is to send an additional index that marks the convo as priorty and somehow bypasses a variable check. 
                    Will have to post on discord about this one.
            - Built the function already, just need to figure out if there are more or less mandatory convos and go through them all.
    - I have modified the function so that subtitles only play within a certain distance to the player. Also any client can:
        - disable subtitles
        - reduce squad banter
            - I went through at added 'true' to the function call for all mandatory convos.
    - I added some diary entries that explain the different mission options and how to access them.
Fixed: prison convo didn't happen
    - Might have something to do with me taking command of the AI from the client as the scout?
        - seems so since its works with the command as the leader.
            - try turning AI off and see if scout as leader at mission start is working. If it still doesn't work then that suggests that 
                the code in the switch is the issue. I suspect this to be the case because I was able to get the default case to work by only 
                having the scout in the helicopter.
            - another thing to try is to switch to scout as leader and see if the beginning convos work. If they do that suggests that the 
                process of moving leadership around is not the issue.
                - The line worked, even though he responed to himself. perhaps cause the scout was the only unit in the boat. Moving leadership 
                    probably not the issue. test as scout as leader.
        - if the leader is scout, case 1 fires but nobody speaks
        - The issue was from the code within switch. I had to define speaker as a variable first because it was getting deleted in the scope 
            it was in. I went through and tested all cases/default and they all work now (so far)
Fixed: pushup units are in sync despite sleeps. try uiSleep instead.
    - added Uisleep
        - didn't seem to do anyting.
        - works fine when testing from ADT and when the trigger is set to true. Gonna have to try it like normal from the chopper.
            - try doing a remoteExec of the animations and see what that does.
            - setup a test trigger and see if it works this way
                - It does so what is different with the other trigger; it's the show/hide modules
                    - they disable simulation, so  even though the sleeps are there they already have the code in queue when shown.
                    - works better now that I separated the hide from the function but it's still glitchy on the client only. 
                        - after much trial and error I abandoned the EH approach because it was causing floaty animations. 
                            I switched to a while loop with sleeps instead. Seems to work better with only one instance of floaty animation 
                                after much testing.
                        - units on client aren't playing the idle animation in between loops
                    - the units end up moving a little so spread them out and use setdir instead of lookat.
                        - ended up using a combo of setDir and disableAI path to keep them in place.
Fixed: marcinko crawls on the client when walking to give a salute.
    - Needed to remoteExec the animation from within the trigger.
Polish (NPCs): Adds to immersion but be wary of time sink. If you aren't making progress then just make it good enough or abandon the idea.
    - Completed: try to find the source of the frame hitch. Move NPCs to other part of map and see if that helps.
        - By using the hide module it seems that the frame hitch is due to something in Staging Area. I suspect it to be the large number of units
            So I will add some deleteVehicle optimizations to try to get rid of it. If that doesn't work then reduce the number of NPCs.
                - They helped but even if I deleted all objects in the staging are there is still a tiny stutter, but much better. It's the 
                    end off the mission and if a stutter is the cost of NPCs immersion then I will pay that price and continue to look for 
                    more optimization.
    - Completed: have Captain walk to end of pier and salute as boat drives away. I am advised to use switchMove/playMoveNow instead of BIS_fnc_ambientAnimCombat.
    - Completed: fill out the prison with prisoners, equipment etc and put hide on it until extract prison convo.
        - Turned off simulation on the props and enabled dynamic simulation for units in area. The hide module helps with performance!
            You cannot do a Skip waypoint and unhide module with the same trigger! This is because you have to choose either sync or skip
            property. You can't have a trigger do both.
    - Completed: Have outpost helicopter spin up as players approach
    - Completed: Have 2 cobra fly over players as they walk to marcinko for debrief
        - Fly over takes about 124 seconds to reach the island.
    - Completed: Have 2 guards at the building with animations
        - tried to make them switchable animations but couldn't get them to flow without resetting. looked glitchy.
    - Completed: have the staging area be busier when players get back to simulate time of day change
        Completed: Created some civilian and military NPC patrols to walk the road to make it look alive.
        Completed: add some troops doing pt
        Completed: add mechanics working on the truck. I added 2 mechanics that cycle between animations. One crosses the street prior to 
            working on the truck.
        Completed: add some troops lounging in the beach chairs and sitting on the ground.
            - tested in MP and looking good execpt there is an issue with the EH. It fires multiple times so the unit jutters before playing the
                animaiton. Gave a shout out to leopard on this one. The issue seems worse in MP.
    - Completed: Have a boat leave the dock when players get to the beach.
        - Used a unit capture command to get it to drive straight but it lacks sound effects. Consider adding some during the sfx pass.
    - Completed: Get marcinko event working when players return from mission.
        - no wave animation in default game can be found.
Completed: Rework (EH animation looping):The current version I have made from Leopards function works pretty good. It only fires once per cycle. 
    The jitter is caused from the sleep I added. So try to figure I way to have the animation pause between cycles somehow.
    - tried to use spawn and sleep, uiSleep, and waitUntil but they all make jitter.
        - next we try adding a longer idle animation. 
            - this works, tried a bunch of ways. The smoothest (althought not perfect) is the first syntax for switchMove. 
                - next we try all the idles in the move set and if they all work then we build a randomizer of the move sets.
                    - they all work, build the randomizer and test in MP
                        - Completed: randomized the 4 sitting units and tested in MP
                        - test mechanic 1 and 2 in MP now that you changed the second animation
                        - finish building pushup NPCs
                            - I got it working with the test unit. Time to add it to the NPCs
                                - added to all NPCs
Optimization: - deleted unneeded triggers/tasks when player gets to infil. talking about all the backup triggers if players miss the infil spot.
Design: Have the extraction pilots exit the heli after it spins down. Tested in MP.
    - I've got the waypoints working and the new waitUntil condition so that it only fires when all heli crew exits.
Design: Have pow and downed pilot exit heli at base and get in ambulance. Tested in MP as well.
Design Decision: Add game master slot. I think this is needed for the milsim community and could help promote the mission for multiplayer. Right now I've only added 
    a virtual slot because it's cleaner and will result in less bugs. I did however write new condition code that should allow me to 
    add a playable zeus in the future (Make it a civilian and it's own group) to help prevent bugs.
    - I think that some communities would prefer a controlable unit so they can talk to players with teamspeak acre or tfar.
    - How to add a virtual entity zeus slot on the lobby screen for multiplayer.
        - place virtual zeus. systems > logic entities > zeus
            - give it a variable name, check box playable, write role description.
        - place game master module. systems > modules > zeus > game master
            - in owner field write the variable name of virtual zeus, check box, forced interface.
    - Zeus behavior
        - Can have admin logged and virtual entity zeus at the same time
        - logic entity counts as a player (allplayers, isplayer, etc)
        - logic entity zeus is not attached to the camera, therefore zeus can enter trigger areas with condition: any player present
            without it triggering and messing up the mission.
    - Do a quick pass and see how much code this will break. (Turns out not much, that's obvious anyways)
        - search triggers in editor (93 triggers)
            - current trigger: all triggers checked for entity or play zeus issues and there are no more obvious issues.
            - modified triggers:
                - Completes task "Get in STAB".
        - control f allplayers and isplayer in the .sqf's (nothing obvious stands out). Also search all action conditions.
            initPlayerLocal - allplayers/isplayer (no issue),
                - modified conditions:
                    - skip to infil - made sure all players in playergroup in the boat
                    - take control of leader - made sure player has to be in playergroup
                    - all convo addaction - made sure player has to be in playergroup
            onplayerrespawn - allplayers/isplayer (no issue), added condition to holdactions that are attached to players only 
                and left the others.
            init - allplayers/isplayer (no issue), no conditions to check
            initserver - might not be an issue unless arma gives leader of group to zeus virtual entity.
                - no actions in here, nothing to modify
Polish: add player note under mission options that zeus is available in singleplayer, adminlogged, and virtual
Fixed: on singleplayer death, infinite switching to player leadership.
    - Added a condition to the code to only run in Multiplayer
Rework: Change how smoke the LZ task completes, because an edge case could happen where a player is standing outside of the marker
            but throws the grenade into the LZ correctly but fails the task anyway because they were outside when they threw it.
            - Currently: checks if the unit is in a marker.
            - Change to: check if the projectile is in the marker area.
                - Use a new EH that checks to see when the smoke is fired and within the area
    - Now I need to convert the old EH to the new one.
        - Explored the hitSurface EH. It won't work with grenades.
        - Converted to new EH which is a combo of FiredMan and Explode. This works better because it tracks to make sure the smoke is in
            the LZ.
Design Decision: write a script that looks for AI leaders on mission start and then gives the leader to a human.
    - check for a on player connected EH. If not its not a big deal since players can use the map board to change leader.
        - modified the script for the leader changed EH an run this at start. works so far.
Design Decision: let players choose to be the AI leader with the map easle at the arsenal.
    - A situation can occure if players choose to take AI with them. If the leader leaves then the AI will take that players spot.
        This means that the AI is the leader and that no one can control them. The leader changed EH that I have designed to fix when
        AI takes over only works if no AI is taken. In that case the unit no longer exists so the leader must be changed, so the EH fires then.
        - I am using a player disconnected EH to check if the leader of the group is AI then I will assign a leader to a human.
            - The condition is not resolving. Try adding a sleep before the if statement. Consider removing the if Statement.
                - The sleep fixed it. It's like there was a delay where the server though that the leader was a human still even after they
                    disconnected.
Design Decision: I will allow AI to be used in MP. I added a EH that will detect if AI is the leader and give it back to players.
Summary of the group leader mechanic that I've learned so far.
1. There will always be a group leader whether it is AI or human. If only one person starts the mission in MP, they are the leader.
    - The leader wont change with JIP players.
        - Unless the editor placed leader comes into the mission.
    - The leader wont change with death.
        - Might change if respawn is disbled.
    - The leader can change if the leader exits the mission. Unsure of priority for units.
        - They cannot get it back by rejoining.
2. The group leader is defined in the editor.
    - The order you add units to the leader is the same as the order that appears in the lobby and group bar UI (editor order is alphabetical).
        - When testing with two apps open I can't get the local host to be the leader. I wonder if this would change on a dedicated server.
            - The local host is always the leader unless scout or demo is chosen.
- Design: Using AI in a MP Scenario. First you need to find out if group leader is tossed to AI, another player, or not at all
            upon the death of the group leader. Then take a look at some options. I choose option 2. Maybe I can write a script that looks
            for AI leaders on mission start and then gives the leader to a human.
            - option 1: disable AI entirley for MP.
            - option 2: leave as is but if players leave AI on and dont take group leader then itll be jank. Thats on them I think.
            - option 3: If group leader does get passed then use select leader and leader changed EH to avoid AI taking control of the 
                AI or some solution that always passes AI to a player.
    Playtesting:
        - With the groupleader as a player and AI in the mission
            - Seems like leader player is always the group leader. I've died a bunch and it hasn't transfered to anyone else.
        - With the groupleader as an AI and player and AI in the mission.
            - The players dont get control of the AI because the AI groupleader does. You basically can't play like this cause you can't 
                control the AI. So you would turn off AI at mission start unless someone is playing the group leader.
        - The game will assign a human as leader if the group leader unit is not chosen at the lobby (AI or human)
            - The order appears to coincide with the order that units are formed into the group in the editor.
                - In testing I could not get the scout to become the group leader presumably because he was the last unit added. This means
                    he could never become group leader unless he is the only one playing.
                    - I presumed wrong. Even though the scout is the second unit added to the group, I haven't yet been able to get him 
                        to be leader.
                - The order can change based on JIP. For example, I could start the game with just the scout and no other AI or humans. Then,
                    have another human join after the mission has started. Even though any other unit is technically higher up on the priority 
                    list than the scout, the scout will remain the group leader because he was assigned it at mission start. What this tells 
                    me is that I can count on the group leader being rather static,
            - If there is only a single player and no AI, then that person will be group leader.
                - In testing with the pilot the group seems to not exist until you meet the pilot, then the group is created then the 
                    pilot is added. I say this because usually you can see yourself as part of a group with the bar at the bottom left.
                    But if only one person spawns in then there is no bar until you meet the pilot.
                    - Using the command 'leader playergroup', I can see that in this situation the leader is already defined. It is just
                        the UI that gets updated when a single player meets the pilot.
            - If the group leader leaves the game:
                - convo is printed twice
                - group leader is apparently tossed to another player (haven't met the pilot yet)
                - After adding the pilot to the group, if the group leader leaves then the pilot becomes the group leader
                    - If that player returns, the pilot is still the group leader
- Polish: adjust file cabinet a little lower in radio hut.
- Design Decision: Players must use a holdAction on a the general in order to proceed. However the way ARMA works is if that unit is in a vehicle 
    that explodes they disappear. That would mean the players can't complete that task. I will go with option 2.
        Option 1: Add a killed EH that checks if the unit is in his vehicle and TPs him out so players can do the action on the body.
        Option 2: I like that the corpse can't be recovered. It wouldn't break the mission since I redesigned it. 
            And might add a nice layer of challenge for players to only disable the vehicle.
                I will add some player feedback if this event occurs.
                    - Add an EH that check if the general was in the car and if he was then fail the task and have a convo play for the Killer.
Polish: - Intro jeep moves out of sight from players. Delete it after player get to infil.
Polish: - There is a locker in lumphat that keeps clipping into the buildings.
            I disabled simulation of the object and disabled damage. I have a theory that it was getting destroyed and that the death animation
                is similar to houses and the generator where the animation lowers it into the ground, only in this case not fully (bug).
- Reworked: deleting obj from inside huts when they are destroyed or else they float.
    - I have got the EH to fire and even to grab nearby objects and delete them. I even added in the script to spare players and vehicles 
        but in testing there is a problem. It turns out the EH is inconsistant. With certain weapons it will not fire. So I cannot use this 
        EH as a solution to my floating object problem.
        - Next thing to try is to place your own hut and make them invincible. Either that or try to grab them somehow and turn off damage. 
            There is some question as to if this is possible with terrain objects though.
            - I was able to grab the terrain objects with a command and turn damage off for them. It sucks that the mission will loose some
                immersion by not seeing burning buildings, but it is way more immersion breaking to see floating objects after a hut has
                been burned down. Now to test in MP. 
                - Placed it in initServer and had to remoteExec it for it to work.
                    - Advice from Hypoxic: Put the code in initPlayerLocal instead and don't remoteExec.
Polish: Went through all triggers and AI before the infil spot and delete them once players get there for performance. Works if players 
    get there nornamally or with skip to infil.
Design decision: Problem: Switching units in SP will not let the player access holdAction, EH, and whatever else is tied to `player`.
    - After some research I decided that the time/effort required to make it work is not worth it for such an edge case scenario.
        - If feedback/playtesting warrants otherwise I can look back into it. Consult the link which supposedly adds EH to all units.
            https://cbateam.github.io/CBA_A3/docs/files/xeh/fnc_addClassEventHandler-sqf.html
            https://cbateam.github.io/CBA_A3/docs/files/events/fnc_addPlayerEventHandler-sqf.html
- Fixed: put a sleep in the systemchat for the left behind message to play after the convo, just like you did with the pow death.
- Fixed: rtb holdaction doesnt work in MP dedicated server.
- Fixed: rtb holdaction can be viewed from outside the heli
- Updated subtitles in entire mission to include if scout says them with if statements and other methods.
    - This should help with multiplayer. If the scout ever becomes the leader of the player group he will have his own lines.
    - There are many context sensitive spots where the scout can now say his own lines (ex: holdActions)
- Reworked the extraction sequence:
    I need to make a design decision for the extraction sequence. Should I let players be able to leave others behind? 
        I have decided that because it is possible for the helicopter to be destroyed that players need to have the agency to decide when 
            it takes off. If they leave any players or AI behind then they will get a fail for the extract task. I dont want the helicopter to be 
            invincible. The benefeits of it being vuneralble are it's more realistic, leads to more varied gameplay at the LZ, and more player 
            excitement since there is a failure state.
        The helicopter will be a one way trip because otherwise, it will add more scripting complexity without much upside. I can always change if play
            tests show that it would be beneficial.
        - The condition for RTB will be set to a variable.
        - There will be a failure state for extract task.
- Reworked the heli extraction for the third time. This is the best one yet: 
    Find a solution: Heli will leave LZ and land far away if an object is on the coordinate position.
        - Calling the landing outside of 5 meters from the coordinates seems safe.
        - So far all objects on the LZ will trigger the pilot to land elsewhere, no matter how small or flat. Except helipads.
        - The function seems to constantly monitor for obstructions. I can run under at the last moment then it will fly off.
            - Tried to use an invisible helipad but didnt help.
            - Going to try some ideas I posted in discord. If that doesn't work consult pig's code for helis.
            - I don't think that monitoring the LZ and moving the LZ will work because in testing it dosen't seem responsive enough. Still better
                than nothing as a fail safe though. At this point the easiest would be to give player feedback. Have pilot tell the players to
                clear the LZ if they are within 5 meters of the landing point. Also do a trigger for the former.
            - I've been testing the landAt command. The nice thing is it seems like it will force a landing if something blocks its path but 
                it wont process the command successfully if the path is blocked on execution. Maybe I could do a continual check to wait until
                the path is clear then execute the command. After that we should be clear.
            - Progress is okay so far. figure out how to keep engine on. add convo for blocked LZ. adjust sleep time to give players more time.
                - changed the condition for landing to check the return value. If false then moves the helipad 5 meters any direction until landing.
                    - had to do it this way cause apparently even a explosion decal will block a landing.
            - have the heli landing fine. now to get it to base.
            - got it going back to base now. need to do more play testing with fly height and clean up unused stuff in the editor.
            - I added convos if the lz was blocked and unblocked. polished code and tried to get it to break. I think its as good as it is gonna
                be at my current skill level.
                - polished lz blocked systemChat to account for more situations.
- reworked the plant bombs on cache mechanic. changed to holdAction and uses actionIDs to remove duplicates. added more convo lines.
    - can break it by blow up cache with rockets.
    - tested various situations with death a respawn and multiple players placing them.
- changed sabatague icon to destroy and change holdAction from CBA to script.
- reworked how the downed pilot is shot down and added the possibility that the players can destroy the samsite before it can shoot down the plane.
- figured out why control z wasnt working
- reworked: search lumphat should pop-up on infil not mission start
- reworked time bomb on stab to be holdAction and made it so you can only place it on the boat from the outside.
- made some trigger areas with subtitles if the STAB goes in the wrong direction
- Chose a design choice regarding the Infil Task. On one hand, I want objectives to be open ended for players to determine how to complete them. 
    But on the other hand if I want to "tell a story" its better to have very specific things happen, like a specific infil spot. 
    I need to decide what kind of misison do I want to make. Or try a blend of the two.
    Decision: I love the idea of player choice and having the chance to make mistakes without a hard fail state. I also love a very tight story and
    immersive mission. If I plan for both then I can have the best of both worlds. That way on my single-player play through, I get to enact my prefered
    "story" and when other players play then they can have more freedom to make mistakes. Therefore we will go with option 1.
    - option 1: Players allowed to miss the infil spot. If they get spotted by AI then all the tasks that would have popped up from 
        the infil task, will now pop up. If they dont get spotted then when they reach Lumphat tasks will need to pop up. This might require them to back
        track or abandon the destroy STAB task but I guess thats what they get for not paying attention.
    - option 2: End mission if they proceed too far upriver. But this wont stop players entering too early.
    - option 3: End the mission if players reach Lumphat without triggering infil task. 
- Reduced the chance of the mission breaking if players skirt the water and avoid the patrols then the situation can break the mission. 
    the troop transports drive toward the players. crash on the bridge when they try to return to load up and the general cant flee right.
    implemented all options below.
    option 1: make it so the players have a harder time getting to that spot without triggering the fail task
    option 2: move the reinforcement trucks back further where they wont get shot.
    option 3: make another patrol on opposite shore to spot players and fail the task of remain undetected
- completely reworked the way that side tasks are picked and completed, to allow for completion before pickup. i added functions for the lines so 
the hold action is more readable. added more voice lines for certain conditions
- deleted rankin easter egg
- Emptied the pows inventroy
- fixed bug, all patrols spotted player while he was far away. Maybe AI shares info with each other? Removed event handler fromm all patrols after first use.
- fixed fog not clearing after 5 minutes at the infil
- changed hold action icons for equip scuba gear to better fit visual continuity
- changed POW type so it says driver to fit the narritive better
- adjusted codex for clarity.
- fixed time of day and weather not changing on dedicated server. Had to remoteExec them to get them to work.
- reworked the patrol boat tasks in the beginning of the mission to flow better and make more sense.
- adjusted the order and timings of tasks created at the infil spot
- adjusted task wording for clarity (remain undeteced and kill the HVT)
- fixed issue where "remain undetected" task wouldn't pop up at the correct time. The variable was tied to a 60sec trigger. Had to create a separate trigger so the general and troop transport could
leave at separate times. this also helps with vehicle colisions since they travel the same road.
- polished spotted consequences. How it works currently: If patrol 1-4 sees player then turn on loud speakers and send troop 
transport to patrol road: (PlayersSpotted var). If OPFOR in set area sees player turn on tracker and sends troop transport to lumphat after players fined
one side mission. Once you search the general no reinforcements come. General flees after 60sec (var playersspotted) if any patrol sees players.
If the patrols see the boat because it was destroyed then general flees after 60 secs.
- Implemented new search for intel task in lumphat. Now there are several items with randomized locations with randomize chance of finding a task on search.
- converted to new heli extract
-JIP intro type text
-JIP skip to ingress removed near mission start
-JIP skip to ingress
-JIP wait for naval patrol time jump
-JIP scuba gear available
-JIP time bombs
- update briefing screen to current point
- update tasks to current point
- new helo extraction with addactions
- end mission addaction
- ambient voices for blurfor team disabled
- 3 questions for captain added in beginning
- AI and players keep loadoutgear and faces (not JIP friendly)
- optimization pass (most objects have dynamic sim, some got changed to simple obj, but the biggest factor for performance is number of AI and draw distance)
- fade in on mission start
- added new start task 
- built up starting area
- INFINITE SMOKE!!
- added lines for end mission briefing
- update all previous tasks to be completed for skip to ingress.
- added randomized MP chatter
- make mission fail for helicopter dies or all players dead
- added hold actions for skip and rtb and end mission.
- added hold action for wait for patrol and scuba tasks.
- touched up side missions
- POW task should be good. all tested except helicopter and exfil
- rescue pilot task should be good. needs testing and esp at extract
- adjusted naval wait triggers so that you can now fail after passing.
- added fail mission trigger if stab is destroyed before reaching infil point
- added exfil trigger that checks for players in the trigger area and alive and in the extract helicopter
- added pilot trigger that checks for pilot back at base and completes task
- added pow trigger that checks for pilot back at base and completes task
- add side chat to pow heal. "its no use. My leg is ruined". in the future randomize 3 responses.
- moved time bombs to IPL
- adjusted skipwaypoint for troop reinforcements after general is killed.
- updates file in lumphat so they dont clip thorugh objects.
- placed optional tasks on bottom
- added fail task state for extract task and update PRI and SEC main tasks to reflect it
- adjusted size of mask area for smoke lz task so it fires if players arent exaclty on the right spot. gives more leeway
- randomize cloud cover at mission start
- add camo to unit lobby description
- add different smoke grenades to loadouts
- update all dead to be tied to spawn area trigger. that way it cant complete on spawn in (needs testing)
- add sidechat if general escapes
- disable heli in starting area
- move intro questions to be compatible with skip to infil
- add sachels to boat
- fix exfil link in execution
- created history tab and finalized the subtabs with info and pictures.
- randomize blind spawns with AI
- create rough draft script of lines with chatgpt
- work on new search for intel system.
- add subtitle for when all intel has been found. "looks like weve picked this place dry"
- added scout versions of quips in lumphat search task


TO LEARN:
- add extensions to vscode
    - function auto add. check your discord.
- how to use rpt files
    - you would ctrl f your diag line, such as "First Unit"
    - A good general one is "error in" which will pick up all the SQF errors so you can read them at leisure.
        But if you're not using diag_log already then they're probably at the bottom.
    - As I restart scenarios a lot for test purpose, I always try to find "Starting mission" to check for script error since the mission began
    - you can also use a watcher extension that will follow the lowest line in the file as they are created
- how to create a mission with hemtt. consult ace discord.